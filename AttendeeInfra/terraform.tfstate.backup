{
  "version": 4,
  "terraform_version": "1.7.4",
  "serial": 9,
  "lineage": "8f808f4b-36e7-ab11-99e1-baf2199cdc42",
  "outputs": {
    "Workshop-IPv4": {
      "value": [
        "147.28.196.11"
      ],
      "type": [
        "tuple",
        [
          "string"
        ]
      ]
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "equinix_metal_ssh_key",
      "name": "ssh_pub_key",
      "provider": "provider[\"registry.terraform.io/equinix/equinix\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created": "time.Date(2024, time.March, 8, 19, 24, 31, 0, time.UTC)",
            "fingerprint": "83:f4:90:7f:54:40:6d:af:32:e0:9d:d1:ce:28:3a:7c",
            "id": "a5dac3c4-a674-4668-9172-9168f41904f6",
            "name": "ssh_pub_key",
            "owner_id": "b8dd41c7-1b01-4713-b0ea-c8e33e8c043d",
            "public_key": "ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBADiRvkUiBwlX3tmNZ7u9yeIiDV7y+wiQoNZ0x3spdSl0Dk9zA01gOhMrFaVhmKe6cn6obPHFQbF+Dbm9/mmdAgf8QDO6EyajomrRr+2nYGsoN9Bhjn/BXpDEq0Wld05r5zdDl/N9g6yxLEpRDe5dQc16+YYgA6seZGCB8U+wGbmNyh5zg==",
            "updated": "time.Date(2024, time.March, 8, 19, 24, 31, 0, time.UTC)"
          },
          "sensitive_attributes": [],
          "dependencies": [
            "tls_private_key.ssh_key_pair"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "local_file",
      "name": "infra_private_key_pem",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "-----BEGIN EC PRIVATE KEY-----\nMIHcAgEBBEIAUGZzHE5SII/GlZ07OYFFR3p48tuGsotdgPOiopIixa9+DJPP5L87\n2VtpNcXY2bmVMtcaWTB5PGMkzVMqE6UR23igBwYFK4EEACOhgYkDgYYABADiRvkU\niBwlX3tmNZ7u9yeIiDV7y+wiQoNZ0x3spdSl0Dk9zA01gOhMrFaVhmKe6cn6obPH\nFQbF+Dbm9/mmdAgf8QDO6EyajomrRr+2nYGsoN9Bhjn/BXpDEq0Wld05r5zdDl/N\n9g6yxLEpRDe5dQc16+YYgA6seZGCB8U+wGbmNyh5zg==\n-----END EC PRIVATE KEY-----",
            "content_base64": null,
            "content_base64sha256": "4R/hHnUQd///SElUyzj1EFdWaYcngqA1ztr4sVSOHn0=",
            "content_base64sha512": "4O2bQ/WyRa0ln3K1dOho3zL6OE7kspZ6Gb9ZRx5gB5s+vn/hIMg93yu73vjldcSsEFvj/FjodH2q2L1OiGXlCA==",
            "content_md5": "5d5fa6b0973f33e0fa8847a2e222a578",
            "content_sha1": "841091bfda759aa18e64962efb9fae4d1656c3f1",
            "content_sha256": "e11fe11e751077ffff484954cb38f510575669872782a035cedaf8b1548e1e7d",
            "content_sha512": "e0ed9b43f5b245ad259f72b574e868df32fa384ee4b2967a19bf59471e60079b3ebe7fe120c83ddf2bbbdef8e575c4ac105be3fc58e8747daad8bd4e8865e508",
            "directory_permission": "0777",
            "file_permission": "0600",
            "filename": "infra-key",
            "id": "841091bfda759aa18e64962efb9fae4d1656c3f1",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "content"
              }
            ]
          ],
          "dependencies": [
            "tls_private_key.ssh_key_pair"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "local_file",
      "name": "infra_public_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBADiRvkUiBwlX3tmNZ7u9yeIiDV7y+wiQoNZ0x3spdSl0Dk9zA01gOhMrFaVhmKe6cn6obPHFQbF+Dbm9/mmdAgf8QDO6EyajomrRr+2nYGsoN9Bhjn/BXpDEq0Wld05r5zdDl/N9g6yxLEpRDe5dQc16+YYgA6seZGCB8U+wGbmNyh5zg==",
            "content_base64": null,
            "content_base64sha256": "se6vAWNPqTqjHWw0gwHX7KU6Z377nmtz7MUURZzJUYk=",
            "content_base64sha512": "Rk5J6jz8hfZWzuPjgOOq6flXjvxAcACPboxqPOrejO4SVjWTuEhvHq6ZujjqKSQnJLKEEhcyHSO/olvdO3ZPlQ==",
            "content_md5": "93c0caa04e617b11a3861394c9ef6edf",
            "content_sha1": "ebe0b5e93101d206069056ae0f3e552e42ebea1a",
            "content_sha256": "b1eeaf01634fa93aa31d6c348301d7eca53a677efb9e6b73ecc514459cc95189",
            "content_sha512": "464e49ea3cfc85f656cee3e380e3aae9f9578efc4070008f6e8c6a3ceade8cee12563593b8486f1eae99ba38ea29242724b2841217321d23bfa25bdd3b764f95",
            "directory_permission": "0777",
            "file_permission": "0600",
            "filename": "infra-key.pub",
            "id": "ebe0b5e93101d206069056ae0f3e552e42ebea1a",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [],
          "dependencies": [
            "tls_private_key.ssh_key_pair"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "tls_private_key",
      "name": "ssh_key_pair",
      "provider": "provider[\"registry.terraform.io/hashicorp/tls\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "algorithm": "ECDSA",
            "ecdsa_curve": "P521",
            "id": "4fbed55208ddefc1150883f317676a90d635b7de",
            "private_key_openssh": "-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAArAAAABNl\nY2RzYS1zaGEyLW5pc3RwNTIxAAAACG5pc3RwNTIxAAAAhQQA4kb5FIgcJV97ZjWe\n7vcniIg1e8vsIkKDWdMd7KXUpdA5PcwNNYDoTKxWlYZinunJ+qGzxxUGxfg25vf5\npnQIH/EAzuhMmo6Jq0a/tp2BrKDfQYY5/wV6QxKtFpXdOa+c3Q5fzfYOssSxKUQ3\nuXUHNevmGIAOrHmRggfFPsBm5jcoec4AAAEACsDoeArA6HgAAAATZWNkc2Etc2hh\nMi1uaXN0cDUyMQAAAAhuaXN0cDUyMQAAAIUEAOJG+RSIHCVfe2Y1nu73J4iINXvL\n7CJCg1nTHeyl1KXQOT3MDTWA6EysVpWGYp7pyfqhs8cVBsX4Nub3+aZ0CB/xAM7o\nTJqOiatGv7adgayg30GGOf8FekMSrRaV3TmvnN0OX832DrLEsSlEN7l1BzXr5hiA\nDqx5kYIHxT7AZuY3KHnOAAAAQVBmcxxOUiCPxpWdOzmBRUd6ePLbhrKLXYDzoqKS\nIsWvfgyTz+S/O9lbaTXF2Nm5lTLXGlkweTxjJM1TKhOlEdt4AAAAAAECAw==\n-----END OPENSSH PRIVATE KEY-----\n",
            "private_key_pem": "-----BEGIN EC PRIVATE KEY-----\nMIHcAgEBBEIAUGZzHE5SII/GlZ07OYFFR3p48tuGsotdgPOiopIixa9+DJPP5L87\n2VtpNcXY2bmVMtcaWTB5PGMkzVMqE6UR23igBwYFK4EEACOhgYkDgYYABADiRvkU\niBwlX3tmNZ7u9yeIiDV7y+wiQoNZ0x3spdSl0Dk9zA01gOhMrFaVhmKe6cn6obPH\nFQbF+Dbm9/mmdAgf8QDO6EyajomrRr+2nYGsoN9Bhjn/BXpDEq0Wld05r5zdDl/N\n9g6yxLEpRDe5dQc16+YYgA6seZGCB8U+wGbmNyh5zg==\n-----END EC PRIVATE KEY-----\n",
            "private_key_pem_pkcs8": "-----BEGIN PRIVATE KEY-----\nMIHuAgEAMBAGByqGSM49AgEGBSuBBAAjBIHWMIHTAgEBBEIAUGZzHE5SII/GlZ07\nOYFFR3p48tuGsotdgPOiopIixa9+DJPP5L872VtpNcXY2bmVMtcaWTB5PGMkzVMq\nE6UR23ihgYkDgYYABADiRvkUiBwlX3tmNZ7u9yeIiDV7y+wiQoNZ0x3spdSl0Dk9\nzA01gOhMrFaVhmKe6cn6obPHFQbF+Dbm9/mmdAgf8QDO6EyajomrRr+2nYGsoN9B\nhjn/BXpDEq0Wld05r5zdDl/N9g6yxLEpRDe5dQc16+YYgA6seZGCB8U+wGbmNyh5\nzg==\n-----END PRIVATE KEY-----\n",
            "public_key_fingerprint_md5": "83:f4:90:7f:54:40:6d:af:32:e0:9d:d1:ce:28:3a:7c",
            "public_key_fingerprint_sha256": "SHA256:rObIHV+Uvfac64U3MTITJogI8IChr1fGUFv+G6T9NdY",
            "public_key_openssh": "ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBADiRvkUiBwlX3tmNZ7u9yeIiDV7y+wiQoNZ0x3spdSl0Dk9zA01gOhMrFaVhmKe6cn6obPHFQbF+Dbm9/mmdAgf8QDO6EyajomrRr+2nYGsoN9Bhjn/BXpDEq0Wld05r5zdDl/N9g6yxLEpRDe5dQc16+YYgA6seZGCB8U+wGbmNyh5zg==\n",
            "public_key_pem": "-----BEGIN PUBLIC KEY-----\nMIGbMBAGByqGSM49AgEGBSuBBAAjA4GGAAQA4kb5FIgcJV97ZjWe7vcniIg1e8vs\nIkKDWdMd7KXUpdA5PcwNNYDoTKxWlYZinunJ+qGzxxUGxfg25vf5pnQIH/EAzuhM\nmo6Jq0a/tp2BrKDfQYY5/wV6QxKtFpXdOa+c3Q5fzfYOssSxKUQ3uXUHNevmGIAO\nrHmRggfFPsBm5jcoec4=\n-----END PUBLIC KEY-----\n",
            "rsa_bits": 2048
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.workshop[0]",
      "mode": "data",
      "type": "template_file",
      "name": "InstallSCION",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "a1874921e08c7b5a0cebf46161f0d5ce844d7c8c33286eaf51577aecb6d443e7",
            "rendered": "sudo apt-get install -y apt-transport-https ca-certificates\necho \"deb [trusted=yes] https://packages.netsec.inf.ethz.ch/debian all main\" | sudo tee /etc/apt/sources.list.d/scionlab.list\nsudo apt-get update -y\nsudo apt-get install -y scionlab\n\n# applications\nsudo apt-get install scion-apps-*\nsudo apt install scion-apps-bat\n\n# start services\nsudo systemctl start scionlab.target\n\n# start web visualization\nsudo systemctl start scion-webapp\n\nsudo apt install scion-sig\nsudo systemctl start scion-ip-gateway.service\n\nsystemctl enable --now scion-dispatcher.service\nsystemctl enable --now scion-daemon.service\n",
            "template": "sudo apt-get install -y apt-transport-https ca-certificates\necho \"deb [trusted=yes] https://packages.netsec.inf.ethz.ch/debian all main\" | sudo tee /etc/apt/sources.list.d/scionlab.list\nsudo apt-get update -y\nsudo apt-get install -y scionlab\n\n# applications\nsudo apt-get install scion-apps-*\nsudo apt install scion-apps-bat\n\n# start services\nsudo systemctl start scionlab.target\n\n# start web visualization\nsudo systemctl start scion-webapp\n\nsudo apt install scion-sig\nsudo systemctl start scion-ip-gateway.service\n\nsystemctl enable --now scion-dispatcher.service\nsystemctl enable --now scion-daemon.service\n",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.workshop[0]",
      "mode": "data",
      "type": "template_file",
      "name": "setupWorkshop",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "72e9ce3f1927fb66577d072eb604ca257a6b0371e9364327dfab20c9570b615f",
            "rendered": "# setup for workshop - addusers, etc...\n\n# add the workshop user\nadduser --disabled-password --gecos \"\" workshop\necho \"workshop:Berlin2022\" | sudo chpasswd\nsudo sed -i \"/^[^#]*PasswordAuthentication[[:space:]]no/c\\PasswordAuthentication yes\" /etc/ssh/sshd_config\nsystemctl restart sshd\n\n\n# give the workshop user su permissions\ncat \u003e /etc/sudoers.d/91-workshop \u003c\u003c EOF\n# place in /etc/sudoers.d/91-workshop\n# chmod 440\n# User rules for workshop\nworkshop ALL=(ALL) NOPASSWD:ALL\nEOF\n\n\n\n# workshop public key\nsudo -u workshop mkdir ~workshop/.ssh\nchown workshop ~workshop/.ssh\nchmod 700 ~workshop/.ssh\nsudo -u workshop cat \u003e\u003e ~workshop/.ssh/authorized_keys \u003c\u003c EOF\necdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBD2tGw5pMyqma6LZ5SGEptD1v5CivnNY8R/pPJy6m4eHnvL91ihlYYvYxPoydNBbEXu6ABE3xEgBOJlEO/W5ly8= sedna-2022-05-13\necdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBHB4ygmO1/aCmO0VIOa3E79u/Lv7cmXqkOEaBIue3gJlrb77qGmgvTXwf6rgZOCOwCsjgT4STG2R1HtT7lfffj4= workshop@r2-30-de1\nEOF\nchown workshop ~workshop/.ssh/authorized_keys\nchmod 400 ~workshop/.ssh/authorized_keys\n\n",
            "template": "# setup for workshop - addusers, etc...\n\n# add the workshop user\nadduser --disabled-password --gecos \"\" workshop\necho \"workshop:Berlin2022\" | sudo chpasswd\nsudo sed -i \"/^[^#]*PasswordAuthentication[[:space:]]no/c\\PasswordAuthentication yes\" /etc/ssh/sshd_config\nsystemctl restart sshd\n\n\n# give the workshop user su permissions\ncat \u003e /etc/sudoers.d/91-workshop \u003c\u003c EOF\n# place in /etc/sudoers.d/91-workshop\n# chmod 440\n# User rules for workshop\nworkshop ALL=(ALL) NOPASSWD:ALL\nEOF\n\n\n\n# workshop public key\nsudo -u workshop mkdir ~workshop/.ssh\nchown workshop ~workshop/.ssh\nchmod 700 ~workshop/.ssh\nsudo -u workshop cat \u003e\u003e ~workshop/.ssh/authorized_keys \u003c\u003c EOF\necdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBD2tGw5pMyqma6LZ5SGEptD1v5CivnNY8R/pPJy6m4eHnvL91ihlYYvYxPoydNBbEXu6ABE3xEgBOJlEO/W5ly8= sedna-2022-05-13\necdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBHB4ygmO1/aCmO0VIOa3E79u/Lv7cmXqkOEaBIue3gJlrb77qGmgvTXwf6rgZOCOwCsjgT4STG2R1HtT7lfffj4= workshop@r2-30-de1\nEOF\nchown workshop ~workshop/.ssh/authorized_keys\nchmod 400 ~workshop/.ssh/authorized_keys\n\n",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.workshop[0]",
      "mode": "managed",
      "type": "equinix_metal_device",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/equinix/equinix\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_private_ipv4": "10.65.38.1",
            "access_public_ipv4": "147.28.196.11",
            "access_public_ipv6": "2604:1380:4642:9300::1",
            "always_pxe": false,
            "behavior": [],
            "billing_cycle": "hourly",
            "created": "2024-03-08T19:24:31Z",
            "custom_data": null,
            "deployed_facility": "da11",
            "deployed_hardware_reservation_id": null,
            "description": null,
            "facilities": [
              "da11"
            ],
            "force_detach_volumes": false,
            "hardware_reservation_id": null,
            "hostname": "DA-11",
            "id": "35e0d791-18b4-4235-a1f3-417d107f6e6b",
            "ip_address": [],
            "ipxe_script_url": "",
            "locked": false,
            "metro": "da",
            "network": [
              {
                "address": "147.28.196.11",
                "cidr": 31,
                "family": 4,
                "gateway": "147.28.196.10",
                "public": true
              },
              {
                "address": "2604:1380:4642:9300::1",
                "cidr": 127,
                "family": 6,
                "gateway": "2604:1380:4642:9300::",
                "public": true
              },
              {
                "address": "10.65.38.1",
                "cidr": 31,
                "family": 4,
                "gateway": "10.65.38.0",
                "public": false
              }
            ],
            "network_type": "layer3",
            "operating_system": "ubuntu_22_04",
            "plan": "c3.small.x86",
            "ports": [
              {
                "bonded": true,
                "id": "90dbbb32-2746-484f-abd7-e36f3b7bc07c",
                "mac": "04:3f:72:d9:87:3a",
                "name": "eth0",
                "type": "NetworkPort"
              },
              {
                "bonded": true,
                "id": "0398b7a0-31be-42b8-858b-0471593b6af9",
                "mac": "04:3f:72:d9:87:3b",
                "name": "eth1",
                "type": "NetworkPort"
              },
              {
                "bonded": true,
                "id": "a8410029-394d-462d-9d26-599b1baad0d7",
                "mac": "",
                "name": "bond0",
                "type": "NetworkBondPort"
              }
            ],
            "project_id": "b8dd41c7-1b01-4713-b0ea-c8e33e8c043d",
            "project_ssh_key_ids": null,
            "reinstall": [],
            "root_password": "\u003cF1uP7{o0G",
            "sos_hostname": "35e0d791-18b4-4235-a1f3-417d107f6e6b@sos.da11.platformequinix.com",
            "ssh_key_ids": [
              "098ec161-bd60-4e85-aef6-ab3fe5bc9047",
              "f1d6936b-472a-4e83-bc16-ba1509087ed1",
              "a0fe3809-2256-410a-9f8d-242ffe99d4c7",
              "c2d8b22b-0e5f-4117-a2c1-7bbf62e20ae3",
              "63676fff-e169-4464-91f3-a086ee1054fc",
              "9e5f011d-5799-4150-aa54-e27ed04df72f",
              "29290ac2-6422-48dd-b996-b882ab85c50c",
              "93e15f6b-d45a-4704-9732-4748ad13eae6",
              "bfa3dbf1-1f48-41b1-9e29-e3ceda891232",
              "60f04f19-f108-4a26-aed2-624c18cf5b7d",
              "32b8afe2-67b6-46c6-bc52-3eb9bfe2b937",
              "a7d5b2bd-3e31-41f3-a6c3-f8195e53c5a3",
              "b34176b0-a050-4f3c-9f21-30eee868b610",
              "b7c3b94c-c52b-4b0a-9729-3402ef0109e1"
            ],
            "state": "active",
            "storage": null,
            "tags": null,
            "termination_time": "",
            "timeouts": null,
            "updated": "2024-03-08T19:30:10Z",
            "user_data": "#cloud-config\n\nssh_authorized_keys:\n  - \"ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBADiRvkUiBwlX3tmNZ7u9yeIiDV7y+wiQoNZ0x3spdSl0Dk9zA01gOhMrFaVhmKe6cn6obPHFQbF+Dbm9/mmdAgf8QDO6EyajomrRr+2nYGsoN9Bhjn/BXpDEq0Wld05r5zdDl/N9g6yxLEpRDe5dQc16+YYgA6seZGCB8U+wGbmNyh5zg==\"",
            "user_ssh_key_ids": null,
            "wait_for_reservation_deprovision": false
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "local_file.infra_private_key_pem",
            "local_file.infra_public_key",
            "module.workshop.data.template_file.InstallSCION",
            "module.workshop.data.template_file.setupWorkshop",
            "tls_private_key.ssh_key_pair"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
